package NetworkSimBase;

import java.io.*;
import java.util.Scanner;
import NetworkSimBase.NetworkNode;

public class Project{
    
    public NetworkNode networkNode = new NetworkNode();
    public CommonVariables commonVariables = new CommonVariables();
    
    public void broadcast(int num)
    {
       int i,j=0;
       for(i=0;;i++)
       {
           commonVariables.xCordinate[j] = commonVariables.xCordinate[j] + i;
           if(commonVariables.xCordinate[j] == commonVariables.xCordinate[j+1])
           {
               networkNode.xco = commonVariables.xCordinate[i];
               break;
            }
       //System.out.println("The nieghbours of node "+num+" are:");
       } 
       for(i=0;;i++)
       {
           commonVariables.yCordinate[j] = commonVariables.yCordinate[j] + i;
           if(commonVariables.yCordinate[j] == commonVariables.yCordinate[j+1])
           {
               break;
           }
       //System.out.println("The nieghbours of node "+num+" are:");
       } 
    } 
    
    public static void main(String[] args) throws IOException {
        FileReader in = new FileReader("/Users/jayeshparekh/Desktop/manet/mobilityfile.txt");
        BufferedReader br = new BufferedReader(in);
        int i=0,j=0,length=0,l=1,comma,del,dot,at;
        double k;
        Project project;
        
        project.commonVariables.time[0]=0.0;

        try {
            
            String line;
            while ((line=br.readLine())!=null)
            {
               
                comma = line.indexOf(",");
                del = line.indexOf("|");
                dot=line.indexOf(".");
                at =line.indexOf("@");
                int size = line.length();
                project.commonVariables.nodenumber[i] = Integer.parseInt(line.substring(0,del));

                project.commonVariables.time[l]= Double.parseDouble(line.substring(at+1,size));
                project.commonVariables.xCordinate[j] = Integer.parseInt(line.substring(del+1,comma));
                project.commonVariables.yCordinate[j] = Integer.parseInt(line.substring(comma+1,at));
                j++;
                i++;
                l++;

            }

                   
        }
        finally {
            
        }
        for(i=0;i<50;i++)
        {
            System.out.println(project.commonVariables.nodenumber[i]);       
        }
        for(i=0;i<40;i++)
      {
          long tx = (long) (project.commonVariables.time[i+1]-project.commonVariables.time[i]);
          try {
              Thread.sleep(tx*10);
            } catch (InterruptedException ie) {
                //Handle exception
            }
            System.out.println("node "+ project.commonVariables.nodenumber[i]+" at "+project.commonVariables.xCordinate[i]+","+project.commonVariables.yCordinate[i]+" at time "+ project.commonVariables.time[i]);
            project.broadcast(project.commonVariables.nodenumber[i]);
        }
        project.broadcast(project.commonVariables.nodenumber[0]); 
    }
    
}

